(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[218],{BNwH:function(e){e.exports=JSON.parse('[{"Name":"Apple Inc.","Ticker":"AAPL","Cusip":37833100,"Isin":null},{"Name":"AbbVie Inc.","Ticker":"ABBV","Cusip":"00287Y109","Isin":null},{"Name":"Accenture plc","Ticker":"ACN","Cusip":"G1151C101","Isin":null},{"Name":"Amazon.com","Ticker":"AMZN","Cusip":23135106,"Isin":null},{"Name":"Boeing Co.","Ticker":"BA","Cusip":97023105,"Isin":null},{"Name":"Bank of America Corp","Ticker":"BAC","Cusip":60505104,"Isin":null},{"Name":"Cisco Systems","Ticker":"CSCO","Cusip":"17275R102","Isin":null},{"Name":"Dow Chemical","Ticker":"DOW","Cusip":260557103,"Isin":null},{"Name":"Facebook","Ticker":"FB","Cusip":"30303M102","Isin":null},{"Name":"General Motors","Ticker":"GM","Cusip":"37045V100","Isin":null},{"Name":"Alphabet Inc","Ticker":"GOOG","Cusip":"02079K107","Isin":null},{"Name":"Intel Corporation","Ticker":"INTC","Cusip":458140100,"Isin":null},{"Name":"Microsoft","Ticker":"MSFT","Cusip":594918104,"Isin":null},{"Name":"Nike","Ticker":"NKE","Cusip":654106103,"Isin":null},{"Name":"Oracle Corporation","Ticker":"ORCL","Cusip":"68389X105","Isin":null},{"Name":"Pepsico Inc.","Ticker":"PEP","Cusip":713448108,"Isin":null},{"Name":"Pfizer Inc","Ticker":"PFE","Cusip":717081103,"Isin":null},{"Name":"Starbucks Corporation","Ticker":"SBUX","Cusip":855244109,"Isin":null},{"Name":"Tesla Inc.","Ticker":"TSLA","Cusip":"88160R101","Isin":null},{"Name":"Twitter","Ticker":"TWTR","Cusip":"90184L102","Isin":null},{"Name":"US Bancorp","Ticker":"USB","Cusip":902973304,"Isin":null},{"Name":"Wells Fargo","Ticker":"WFC","Cusip":949746101,"Isin":null},{"Name":"Wal-Mart","Ticker":"WMT","Cusip":931142103,"Isin":null}]')},"NQ+5":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t("mrSG").__exportStar(t("rat6"),n)},dg7L:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FinanceApiImpl=void 0;var a=t("mrSG"),i=function(e){function n(n,t){var a=e.call(this,n)||this;return a.options=t,a}return a.__extends(n,e),n.prototype.getPluginOptions=function(){return this.options},n}(t("FDxa").ApiBase);n.FinanceApiImpl=i},gxmM:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdaptablePlugin=void 0;var a=t("mrSG"),i=function(){function e(e){this.pluginId="",this.options=e,this.values={}}return e.prototype.registerProperty=function(e,n){this.values[e]=n},e.prototype.getProperty=function(e){var n=this;return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=n.values[e];if(r)return r.apply(void 0,a.__spread(t))}},e.prototype.hasProperty=function(e){return!!this.values[e]},e.prototype.beforeInit=function(e){},e.prototype.afterInitOptions=function(e,n){},e.prototype.afterInitApi=function(e,n){},e.prototype.afterInitServices=function(e){},e.prototype.afterInitModules=function(e,n){},e.prototype.afterSetLayout=function(e,n){},e.prototype.afterInit=function(e){},e.prototype.reduxMiddleware=function(e){},e.prototype.onStoreEvent=function(e,n,t){},e.prototype.onAdaptableReady=function(e,n){},e}();n.AdaptablePlugin=i},hdGy:function(e,n,t){"use strict";t.r(n);var a,i=t("q1tI"),r=t("o0o1"),o=t.n(r),l=t("HaE+"),u=(t("nX5y"),t("BNwH")),s=t("ThKj"),p=t("rePB"),c=(t("PMha"),t("cUqQ"),t("5TJ6"),t("jWP/"),t("iMsr"),t("mbJ9")),d=t.n(c),m=t("mXS1"),f=t("kiHV"),g=t.n(f);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){Object(p.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var y=function(){var e=Object(l.a)(o.a.mark((function e(n,t){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={primaryKey:"Name",userName:"Demo User",adaptableId:"FDC3 Instrument Demo",vendorGrid:v(v({},{columnDefs:n,rowData:t,enableRangeSelection:!0,sideBar:!0,suppressMenuHide:!0}),{},{modules:m.a}),plugins:[g()({instrumentColumns:[{columnId:"Name",tickerColumnId:"Ticker",cusipColumnId:"Cusip"}]})]},e.next=4,d.a.init(i);case 4:return(a=e.sent).eventApi.on("BroadcastInstrument",(function(e){var n=document.getElementById("outputDiv");n&&(n.innerHTML=JSON.stringify(e))})),e.abrupt("return",{adaptableOptions:i,adaptableApi:a});case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),C=Object(l.a)(o.a.mark((function e(){var n,t,a,i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new s.a).setUpAgGridLicence(),t=JSON.parse(JSON.stringify(u)),n.convertExcelData(t),a=n.getInstrumentSchema(),e.next=7,y(a,t);case 7:return i=e.sent,r=i.adaptableOptions,i.adaptableApi,r.vendorGrid.onGridReady=function(e){e.columnApi.autoSizeAllColumns(),setTimeout((function(){return e.columnApi.autoSizeAllColumns()}),1),e.api.addEventListener("newColumnsLoaded",(function(){e.columnApi.autoSizeAllColumns()})),e.api.closeToolPanel()},e.abrupt("return",{unload:function(){},code:"import '@adaptabletools/adaptable/index.css';\nimport '@adaptabletools/adaptable/themes/dark.css';\nimport '@ag-grid-community/all-modules/dist/styles/ag-grid.css';\nimport '@ag-grid-community/all-modules/dist/styles/ag-theme-balham.css';\nimport '@ag-grid-community/all-modules/dist/styles/ag-theme-balham-dark.css';\nimport Adaptable from '@adaptabletools/adaptable/agGrid';\nimport { GridOptions } from '@ag-grid-community/all-modules';\nimport {\n  AdaptableOptions,\n  AdaptableApi,\n  InstrumentContext,\n} from '@adaptabletools/adaptable/types';\nimport { AllEnterpriseModules } from '@ag-grid-enterprise/all-modules';\nimport finance from '@adaptabletools/adaptable-plugin-finance';\n\nvar adaptableApi: AdaptableApi;\n\nexport default async (columnDefs: any[], rowData: any[]) => {\n  const gridOptions: GridOptions = {\n    columnDefs,\n    rowData,\n    enableRangeSelection: true,\n    sideBar: true,\n    suppressMenuHide: true,\n  };\n\n  const adaptableOptions: AdaptableOptions = {\n    primaryKey: 'Name',\n    userName: 'Demo User',\n    adaptableId: 'FDC3 Instrument Demo',\n    vendorGrid: { ...gridOptions, modules: AllEnterpriseModules },\n    plugins: [\n      finance({\n        instrumentColumns: [\n          {\n            columnId: 'Name',\n            tickerColumnId: 'Ticker',\n            cusipColumnId: 'Cusip',\n          },\n        ],\n      }),\n    ],\n  };\n  adaptableApi = await Adaptable.init(adaptableOptions);\n\n  adaptableApi.eventApi.on(\n    'BroadcastInstrument',\n    (context: InstrumentContext) => {\n      const div = document.getElementById('outputDiv');\n      if (div) {\n        div.innerHTML = JSON.stringify(context);\n      }\n    }\n  );\n\n  return { adaptableOptions, adaptableApi };\n};\n"});case 12:case"end":return e.stop()}}),e)})));n.default=function(e){return Object(i.useEffect)((function(){C().then((function(n){e.onReady&&e.onReady(n)}))}),[]),null}},kiHV:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.broadcastInstrument=void 0;var a=t("mrSG"),i=t("NQ+5"),r=t("xkkb"),o=a.__importDefault(t("hbEN")),l=a.__importDefault(t("uGiK")),u=t("xr55"),s=t("DR3G"),p=t("dg7L");r.version!==l.default&&console.warn('\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n!!!!!!! "@adaptabletools/adaptable-plugin-finance" (v @'+r.version+') and "@adaptabletools/adaptable" (v @'+l.default+") have different versions - they should have the exact same version.\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n");var c={},d=["ticker","ISIN","CUSIP","SEDOL","RIC","BBG","PERMID","FIGI"];n.broadcastInstrument=function(e,n){e.eventApi.emit("BroadcastInstrument",n)};var m=function(e){return"WA "+e.weightedColumnId},f=function(e){function t(n){var t=e.call(this,n)||this;t.pluginId="finance",t.weightedAverageMap=new Map,t.interceptSetupColumnProperty=function(e,n,a,i){var r,o=t.weightedAverageMap.get(e.colId);if(!o)return a;var l=o.columnId,u=o.weightedColumnId,s=m(o),p=i.layoutApi.getCurrentLayout();if("valueGetter"===n)return function(n){var t,a,i=null===(a=p.AggregationColumns)||void 0===a?void 0:a[e.colId];return i!==s&&!0!==i?n.data[l]:n.node.group?void 0:((t={})[l]=n.data[l],t[u]=n.data[u],t.toString=function(){return n.data[l]},t.valueOf=function(){return n.data[l]},t)};if("aggFunc"===n){var c=null===(r=p.AggregationColumns)||void 0===r?void 0:r[e.colId];return c!==s&&!0!==c?c:s}return a},t.options=a.__assign(a.__assign({},c),n);var i=t.options.weightedAverageColumns;return i&&(t.weightedAverageMap=i.reduce((function(e,n){return e.set(n.columnId,n),e}),new Map)),t}return a.__extends(t,e),t.prototype.afterInitOptions=function(e,n){n.vendorGrid.aggFuncs=n.vendorGrid.aggFuncs||{};var t=this.options.weightedAverageColumns;t&&t.length&&t.forEach((function(e){n.vendorGrid.aggFuncs[m(e)]=function(e){var n=e.columnId,t=e.weightedColumnId;return function(e){var a,i=0,r=0;return e.values.forEach((function(e){e&&e[t]&&(i+=e[t]),e&&e[n]&&e[t]&&(r+=e[t]*e[n])})),(a={toString:function(){return r/i},valueOf:function(){return r/i}})[n]=r,a[t]=i,a}}(e)}))},t.prototype.afterSetLayout=function(e,n){var t=this.options.weightedAverageColumns;t&&t.length&&e.setupColumns()},t.prototype.afterInitApi=function(e){var t=this,a=e.api;this.financeApi=new p.FinanceApiImpl(e,this.options),this.registerProperty("api",(function(){return t.financeApi})),e._on("CreateAdaptableContextMenuItems",(function(e){var i,r=e.items,o=e.menuContext,l=(null!==(i=t.options.instrumentColumns)&&void 0!==i?i:[]).find((function(e){return e.columnId===o.adaptableColumn.ColumnId}));l&&r.push({label:"Broadcast "+o.gridCell.displayValue,isVisible:!0,icon:"campaign",onClick:function(){n.broadcastInstrument(a,{type:"instrument",name:o.gridCell.displayValue,id:d.reduce((function(e,n){var t=n.toLowerCase()+"ColumnId",a=l[t];return a&&(e[n]=o.rowNode.data[a]),e}),{})})}})}))},t.prototype.onAdaptableReady=function(e){var n=this;e.adaptableOptions.generalOptions.cellSummaryOperations=e.adaptableOptions.generalOptions.cellSummaryOperations||[],e.adaptableOptions.generalOptions.cellSummaryOperations.push({operationName:"Only",operationFunction:u.calculateOnly}),e.adaptableOptions.generalOptions.cellSummaryOperations.push({operationName:"Weighted Avg",operationFunction:u.calculateWeightedAverage}),e.api.pluginsApi.registerPlugin(this.pluginId,void 0);var t=this.options.weightedAverageColumns;t&&t.length&&e.adaptableOptions.vendorGrid.api.addEventListener(s.Events.EVENT_COLUMN_VALUE_CHANGED,o.default((function(t){var a;n.weightedAverageMap.has(null===(a=t.column)||void 0===a?void 0:a.colId)&&(e.updateLayoutFromGrid(),e.setupColumns())}),500))},t}(i.AdaptablePlugin);n.default=function(e){return new f(e)}},rat6:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdaptablePlugin=void 0;var a=t("gxmM");Object.defineProperty(n,"AdaptablePlugin",{enumerable:!0,get:function(){return a.AdaptablePlugin}})},xkkb:function(e){e.exports=JSON.parse('{"_from":"@adaptabletools/adaptable-plugin-finance@9.0.0-canary.29","_id":"@adaptabletools/adaptable-plugin-finance@9.0.0-canary.29","_inBundle":false,"_integrity":"sha512-zUnUC31Lg2QSWEqHsU3PVKTknu6911D6mVPz1wkaD+3+DBsJU8hE4f7Tiu0/dFV83Jsekc+OXUK/NVObvaXc4w==","_location":"/@adaptabletools/adaptable-plugin-finance","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"@adaptabletools/adaptable-plugin-finance@9.0.0-canary.29","name":"@adaptabletools/adaptable-plugin-finance","escapedName":"@adaptabletools%2fadaptable-plugin-finance","scope":"@adaptabletools","rawSpec":"9.0.0-canary.29","saveSpec":null,"fetchSpec":"9.0.0-canary.29"},"_requiredBy":["/"],"_resolved":"https://registry.adaptabletools.com/@adaptabletools%2fadaptable-plugin-finance/-/adaptable-plugin-finance-9.0.0-canary.29.tgz","_shasum":"f4257358e23d1cac2ad581a7aa5693b44e81c73e","_spec":"@adaptabletools/adaptable-plugin-finance@9.0.0-canary.29","_where":"/home/runner/work/adaptable-demo/adaptable-demo/demo","author":{"name":"Jonny Wolfson","email":"jonny.wolfson@adaptabletools.com"},"bundleDependencies":false,"dependencies":{"@adaptabletools/adaptable":"9.0.0-canary.29","lodash-es":"^4.17.15"},"deprecated":false,"description":"","homepage":"http://www.adaptabletools.com/","main":"src/index.js","name":"@adaptabletools/adaptable-plugin-finance","peerDependencies":{"@ag-grid-community/all-modules":">=25.3.0"},"publishConfig":{"registry":"https://registry.adaptabletools.com"},"version":"9.0.0-canary.29"}')},xr55:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.calculateWeightedAverage=n.calculateOnly=void 0;var a=t("mrSG"),i=a.__importDefault(t("zwJd")),r=a.__importDefault(t("1f9d"));n.calculateOnly=function(e){var n=e.allValues;return 1==e.distinctCount?JSON.stringify(n[0]):""},n.calculateWeightedAverage=function(e){e.numericValues;var n=e.numericColumns,t=e.selectedCellInfo,a=e.api;if(1!=(null===n||void 0===n?void 0:n.length))return"";var o=a.pluginsApi.getFinancePluginApi().getPluginOptions().weightedAverageColumns;if(i.default.IsNotNullOrEmpty(o)){var l=n[0],u=o.find((function(e){return e.columnId==l}));if(u){var s=0,p=0;t.gridCells.forEach((function(e){var n=a.gridApi.getGridCellFromRowNode(e.rowNode,u.weightedColumnId);s+=n.rawValue,p+=n.rawValue*e.normalisedValue}));var c=a.formatColumnApi.getFormatColumnForColumnId(l);if(c&&c.DisplayFormat){var d=c.DisplayFormat.Options;if(d)return r.default.NumberFormatter(p/s,d)}return p/s}}}}}]);